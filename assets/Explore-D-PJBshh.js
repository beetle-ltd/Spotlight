import{u as l,j as e,r as d,d as h,t as f,C as g}from"./index-ufe_VDQa.js";import{u,b as m,B as x,d as j,D as y,e as w,f as D,g as v,P as N,G as P,L,a as b}from"./api-constants-BTzVX2Lk.js";import"./button-BiSV5wp7.js";const k=()=>{const{productId:t}=l(),r=async()=>{try{return(await m.get(`${x}/api/v1/stores/products/${t}`)).data}catch(n){throw new Error(n.message)}},{data:s,isLoading:o,error:a}=u({queryKey:["fetchProductById"],queryFn:r,enabled:!!t});return{productData:s==null?void 0:s.data,isLoading:o,error:a}},E=t=>{const r=s=>{const{productData:o,isLoading:a,error:n}=k();return a?e.jsx("div",{children:"Loading..."}):n?e.jsxs("div",{children:["Error: ",n.message]}):e.jsx(t,{...s,item:o,_item:o||s.fallbackData})};return r.displayName=`withProductData(${t.displayName||t.name})`,r},C=E;function I({productId:t}){const[r,s]=d.useState(!1),o=h();d.useEffect(()=>{t&&s(!0)},[]);const a=()=>{s(!1),t&&o("/explore",{replace:!0})},n=j("(min-width: 768px)"),i=C(N);return n?e.jsx(y,{open:r,onOpenChange:a,className:"border-0",children:e.jsx(w,{className:"sm:max-w-[900px] p-0 overflow-hidden",children:e.jsx(i,{})})}):e.jsx(D,{open:r,onClose:a,children:e.jsx(v,{children:e.jsx(i,{})})})}function $(t){return P({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"path",attr:{d:"m21 21-4.3-4.3"},child:[]}]})(t)}function q(){const t=localStorage.getItem("store_name")||"",{productId:r}=l(),s=async()=>{try{const c=await m.get(`${x}/api/v1/stores/links/product-recommendations?storeUsername=${t}&page=1&perPage=300`);if(c.statusText==="OK")return c.data}catch(c){console.log(c)}},{data:o,error:a,isLoading:n}=u({queryKey:["fetchRecommendedProducts"],queryFn:s});if(a&&f({description:a.message}),n)return"lOADING PLEASE WAIT";const p=o.data.data;return e.jsxs("div",{children:[r&&e.jsx(I,{productId:r}),e.jsx(g,{children:e.jsxs("div",{className:"flex flex-col gap-y-10 items-center py-5",children:[e.jsx("div",{className:"block",children:e.jsx(L,{url:`/${t}`})}),e.jsxs("div",{className:"flex items-center bg-gray-100 p-2 sm:p-4 w-full rounded-md text-gray-500",children:[e.jsxs("div",{className:"flex flex-1 items-center gap-x-3",children:[e.jsx($,{size:18,className:"cursor-pointer"}),e.jsx("input",{type:"text",placeholder:"Search...",className:"w-full h-full appearance-none bg-transparent outline-none"})]}),e.jsx("p",{children:e.jsxs("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100",children:[e.jsx("span",{className:"text-xs",children:"âŒ˜"}),"K"]})})]})]})}),e.jsx("div",{className:"w-full sm:w-[70%] mt-10 mx-auto ",children:e.jsx(b,{products:p})})]})}export{q as default};
